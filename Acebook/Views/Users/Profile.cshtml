@model acebook.Models.User
@using acebook.Models

<div class="profile-buttons">
    @if (Context.Session.GetString("Username") == Model.Name)
    {
        <a href="@Url.Action("Edit", new { username = Model.Name })" class="btn btn-primary">Account</a>
    }
    <form action="@Url.Action("Logout", "Sessions")" method="post" style="display:inline;">
        <button type="submit" class="btn btn-secondary">Logout</button>
    </form>
</div>

<div class="profile-container">
    @if (!string.IsNullOrEmpty(Model.profilePicture))
    {
        <img src="@Model.profilePicture" alt="@Model.Name's Profile Picture" class="profile-picture" />
    }
    else
    {
        <p>No profile picture set.</p>
    }

    <h1 class="profile-username">@Model.Name</h1>

    <div class="post-box">
        <textarea placeholder="Write something..."></textarea>
        <button>Post</button>
    </div>

    <div class="posts-container">
        <h2>@ViewBag.ProfileUserName's Posts</h2>
        @{
            var posts = ViewBag.CurrentUsersPosts as IEnumerable<Post>;
        }
        @if (posts != null && posts.Any())
        {
            <ul>
                @foreach (var post in posts)
                {
                    <li>
                        <p>@post.PostText</p>
                        @if (!string.IsNullOrEmpty(post.PostImage))
                        {
                            <img src="@post.PostImage" alt="Post Image" style="max-width: 40%; height: auto;" />
                        }
                        <p class="post-meta">Posted on: @post.CreatedAt.ToString("MMMM dd, yyyy - hh:mm tt")</p>
                    </li>
                }
            </ul>
        }
        else
        {
            <p>No posts attached.</p>
        }
    </div>
</div>
